- Доработки state
  - Запрос текущей позиции
  - Формирование Zobrist Hash (поддержка транзакционности)
  - state-проверки параметризованные направлениями
    - точка отката (стек не откатывается)
      - стек требуется откатывать для формирования (let ... (any ...))
    - команда навигации (формирует значение на стеке)
    - если значение истинно - state-проверка (например is-empty?)
    - откат с сохранением значения на стеке
- Менеджер литералов
  - Цель - исключение сравнений строк в runtime
  - Имена позиций и направлений, используемых в коде, должны быть ассоциированы с числовыми значениями
- Отложенные действия
  - Реализация
    - Создаёт именованный scope для выполнения действий в будущем
    - Запомненные действия выполняются по команде
    - Запомненные действия могут выполняться многократно
  - Использование
    - Пометка для удаления для реализации правила "Турецкого удара"
    - Отложенные проверки выполнения нарушаемых инвариантов
    - Управление нотацией формируемого хода
- Структура хода
  - any position (более оптимально копировать из начального состояния)
  - check friend, take, начальная позиция нотации (pre)
  - выполнение хода, отложенные взятия, отложенная нотация
  - точка отката для end-move
  - опциональное any (выход на post, либо продолжение)
  - проверка инвариантов, промежуточные и конечная позиции нотации (post)
  - формирование хода (в окружение хода)
  - откат для формирования следующего хода