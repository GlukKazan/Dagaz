(import "chess-boards.drf" chess-board-8x8)
(import "checkers.drf" checkers-invariant checkers-piece set-counter flying-king common-capture)

(piece
   (name Man M)
   (is-a checkers-invariant)
   (is-a checkers-piece)
   (is-a set-counter)
   (dir nw ne)
   (capture-dir sw se)
   (post
      (if (in-zone? promotion)
          (piece-type K)
          (log (order 3) " = " piece-type)
      )
   )
   (move
      (check (any capture-dir))
      (check is-enemy?)
      common-capture
      end-move-part
   )
)

(piece
   (name King K)
   (is-a checkers-invariant)
   (is-a flying-king)
   (is-a set-counter)
   (dir nw ne sw se)
)

(player
   (name White)
   (M a1 c1 e1 g1 b2 d2 f2 h2 a3 c3 e3 g3)
   (zone (name promotion) b8 d8 f8 h8)
)

(player
   (name Black)
   (sym nw se)
   (sym ne sw)
   (sym se nw)
   (sym sw ne)
   (M b8 d8 f8 h8 a7 c7 e7 g7 b6 d6 f6 h6)
   (zone (name promotion) a1 c1 e1 g1)
)

(game
   (name "Russian Checkers")
   (board chess-board-8x8)
   (players White Black)
   (loss
      (check no-moves?)
   )
)
