(define drop-dice (
  (verify (in-zone? dice-zone))
  (verify empty?)
  add
))

(define step-1 (
  $1 (while friend? up) add
))

(define step-2 (
  $1 $1 (while friend? up) add
))

(define step-3 (
  $1 $1 $1 (while friend? up) add
))

(define step-4 (
  $1 $1 $1 $1 (while friend? up) add
))

(define step-5 (
  $1 $1 $1 $1 $1 (while friend? up) add
))

(define step-6 (
  $1 $1 $1 $1 $1 $1 (while friend? up) add
))

(define d
  (piece
     (name D$1)
     (image White "images/backgammon/$1.bmp"
            Black "images/backgammon/$1.bmp")
     (drops
        (move-type drop-type)
        (drop-dice)
     )
  )
)

(game
  (title "Tavola delle stagioni")

  (option "smart moves" true)
  (option "pass turn"   forced)

  (players White Green Red Black)
  (turn-order White Green Red Black)

  (board
     (image "images/backgammon/tavola.bmp")
     (positions  
         (m1a 59 50 93 82)
         (m1b 59 58 93 90)
         (m1c 59 66 93 98)
         (m1d 59 74 93 106)
         (m1e 59 82 93 114)
         (m1f 59 90 93 122)
         (m1g 59 98 93 130)
         (m1h 59 106 93 138)
         (m1i 59 114 93 146)
         (m1j 59 122 93 154)
         (m1k 59 130 93 162)
         (m1l 59 138 93 170)
         (m1m 59 146 93 178)
         (m1n 59 154 93 186)
         (m1o 59 162 93 194)
         (m1p 59 170 93 202)
         (m1q 59 178 93 210)

         (l1a 93 50 127 82)
         (l1b 93 58 127 90)
         (l1c 93 66 127 98)
         (l1d 93 74 127 106)
         (l1e 93 82 127 114)
         (l1f 93 90 127 122)
         (l1g 93 98 127 130)
         (l1h 93 106 127 138)
         (l1i 93 114 127 146)
         (l1j 93 122 127 154)
         (l1k 93 130 127 162)
         (l1l 93 138 127 170)
         (l1m 93 146 127 178)
         (l1n 93 154 127 186)
         (l1o 93 162 127 194)
         (l1p 93 170 127 202)
         (l1q 93 178 127 210)

         (k1a 127 50 161 82)
         (k1b 127 58 161 90)
         (k1c 127 66 161 98)
         (k1d 127 74 161 106)
         (k1e 127 82 161 114)
         (k1f 127 90 161 122)
         (k1g 127 98 161 130)
         (k1h 127 106 161 138)
         (k1i 127 114 161 146)
         (k1j 127 122 161 154)
         (k1k 127 130 161 162)
         (k1l 127 138 161 170)
         (k1m 127 146 161 178)
         (k1n 127 154 161 186)
         (k1o 127 162 161 194)
         (k1p 127 170 161 202)
         (k1q 127 178 161 210)

         (j1a 161 50 195 82)
         (j1b 161 58 195 90)
         (j1c 161 66 195 98)
         (j1d 161 74 195 106)
         (j1e 161 82 195 114)
         (j1f 161 90 195 122)
         (j1g 161 98 195 130)
         (j1h 161 106 195 138)
         (j1i 161 114 195 146)
         (j1j 161 122 195 154)
         (j1k 161 130 195 162)
         (j1l 161 138 195 170)
         (j1m 161 146 195 178)
         (j1n 161 154 195 186)
         (j1o 161 162 195 194)
         (j1p 161 170 195 202)
         (j1q 161 178 195 210)

         (h1a 195 50 229 82)
         (h1b 195 58 229 90)
         (h1c 195 66 229 98)
         (h1d 195 74 229 106)
         (h1e 195 82 229 114)
         (h1f 195 90 229 122)
         (h1g 195 98 229 130)
         (h1h 195 106 229 138)
         (h1i 195 114 229 146)
         (h1j 195 122 229 154)
         (h1k 195 130 229 162)
         (h1l 195 138 229 170)
         (h1m 195 146 229 178)
         (h1n 195 154 229 186)
         (h1o 195 162 229 194)
         (h1p 195 170 229 202)
         (h1q 195 178 229 210)

         (g1a 229 50 263 82)
         (g1b 229 58 263 90)
         (g1c 229 66 263 98)
         (g1d 229 74 263 106)
         (g1e 229 82 263 114)
         (g1f 229 90 263 122)
         (g1g 229 98 263 130)
         (g1h 229 106 263 138)
         (g1i 229 114 263 146)
         (g1j 229 122 263 154)
         (g1k 229 130 263 162)
         (g1l 229 138 263 170)
         (g1m 229 146 263 178)
         (g1n 229 154 263 186)
         (g1o 229 162 263 194)
         (g1p 229 170 263 202)
         (g1q 229 178 263 210)

         (f1a 287 50 321 82)
         (f1b 287 58 321 90)
         (f1c 287 66 321 98)
         (f1d 287 74 321 106)
         (f1e 287 82 321 114)
         (f1f 287 90 321 122)
         (f1g 287 98 321 130)
         (f1h 287 106 321 138)
         (f1i 287 114 321 146)
         (f1j 287 122 321 154)
         (f1k 287 130 321 162)
         (f1l 287 138 321 170)
         (f1m 287 146 321 178)
         (f1n 287 154 321 186)
         (f1o 287 162 321 194)
         (f1p 287 170 321 202)
         (f1q 287 178 321 210)

         (e1a 321 50 355 82)
         (e1b 321 58 355 90)
         (e1c 321 66 355 98)
         (e1d 321 74 355 106)
         (e1e 321 82 355 114)
         (e1f 321 90 355 122)
         (e1g 321 98 355 130)
         (e1h 321 106 355 138)
         (e1i 321 114 355 146)
         (e1j 321 122 355 154)
         (e1k 321 130 355 162)
         (e1l 321 138 355 170)
         (e1m 321 146 355 178)
         (e1n 321 154 355 186)
         (e1o 321 162 355 194)
         (e1p 321 170 355 202)
         (e1q 321 178 355 210)

         (d1a 355 50 389 82)
         (d1b 355 58 389 90)
         (d1c 355 66 389 98)
         (d1d 355 74 389 106)
         (d1e 355 82 389 114)
         (d1f 355 90 389 122)
         (d1g 355 98 389 130)
         (d1h 355 106 389 138)
         (d1i 355 114 389 146)
         (d1j 355 122 389 154)
         (d1k 355 130 389 162)
         (d1l 355 138 389 170)
         (d1m 355 146 389 178)
         (d1n 355 154 389 186)
         (d1o 355 162 389 194)
         (d1p 355 170 389 202)
         (d1q 355 178 389 210)

         (c1a 389 50 423 82)
         (c1b 389 58 423 90)
         (c1c 389 66 423 98)
         (c1d 389 74 423 106)
         (c1e 389 82 423 114)
         (c1f 389 90 423 122)
         (c1g 389 98 423 130)
         (c1h 389 106 423 138)
         (c1i 389 114 423 146)
         (c1j 389 122 423 154)
         (c1k 389 130 423 162)
         (c1l 389 138 423 170)
         (c1m 389 146 423 178)
         (c1n 389 154 423 186)
         (c1o 389 162 423 194)
         (c1p 389 170 423 202)
         (c1q 389 178 423 210)

         (b1a 423 50 457 82)
         (b1b 423 58 457 90)
         (b1c 423 66 457 98)
         (b1d 423 74 457 106)
         (b1e 423 82 457 114)
         (b1f 423 90 457 122)
         (b1g 423 98 457 130)
         (b1h 423 106 457 138)
         (b1i 423 114 457 146)
         (b1j 423 122 457 154)
         (b1k 423 130 457 162)
         (b1l 423 138 457 170)
         (b1m 423 146 457 178)
         (b1n 423 154 457 186)
         (b1o 423 162 457 194)
         (b1p 423 170 457 202)
         (b1q 423 178 457 210)

         (a1a 457 50 491 82)
         (a1b 457 58 491 90)
         (a1c 457 66 491 98)
         (a1d 457 74 491 106)
         (a1e 457 82 491 114)
         (a1f 457 90 491 122)
         (a1g 457 98 491 130)
         (a1h 457 106 491 138)
         (a1i 457 114 491 146)
         (a1j 457 122 491 154)
         (a1k 457 130 491 162)
         (a1l 457 138 491 170)
         (a1m 457 146 491 178)
         (a1n 457 154 491 186)
         (a1o 457 162 491 194)
         (a1p 457 170 491 202)
         (a1q 457 178 491 210)

         (m2a 59 348 93 380)
         (m2b 59 340 93 372)
         (m2c 59 332 93 364)
         (m2d 59 324 93 356)
         (m2e 59 316 93 348)
         (m2f 59 308 93 340)
         (m2g 59 300 93 332)
         (m2h 59 292 93 324)
         (m2i 59 284 93 316)
         (m2j 59 276 93 308)
         (m2k 59 268 93 300)
         (m2l 59 260 93 292)
         (m2m 59 252 93 284)
         (m2n 59 244 93 276)
         (m2o 59 236 93 268)
         (m2p 59 228 93 260)
         (m2q 59 220 93 252)

         (l2a 93 348 127 380)
         (l2b 93 340 127 372)
         (l2c 93 332 127 364)
         (l2d 93 324 127 356)
         (l2e 93 316 127 348)
         (l2f 93 308 127 340)
         (l2g 93 300 127 332)
         (l2h 93 292 127 324)
         (l2i 93 284 127 316)
         (l2j 93 276 127 308)
         (l2k 93 268 127 300)
         (l2l 93 260 127 292)
         (l2m 93 252 127 284)
         (l2n 93 244 127 276)
         (l2o 93 236 127 268)
         (l2p 93 228 127 260)
         (l2q 93 220 127 252)

         (k2a 127 348 161 380)
         (k2b 127 340 161 372)
         (k2c 127 332 161 364)
         (k2d 127 324 161 356)
         (k2e 127 316 161 348)
         (k2f 127 308 161 340)
         (k2g 127 300 161 332)
         (k2h 127 292 161 324)
         (k2i 127 284 161 316)
         (k2j 127 276 161 308)
         (k2k 127 268 161 300)
         (k2l 127 260 161 292)
         (k2m 127 252 161 284)
         (k2n 127 244 161 276)
         (k2o 127 236 161 268)
         (k2p 127 228 161 260)
         (k2q 127 220 161 252)

         (j2a 161 348 195 380)
         (j2b 161 340 195 372)
         (j2c 161 332 195 364)
         (j2d 161 324 195 356)
         (j2e 161 316 195 348)
         (j2f 161 308 195 340)
         (j2g 161 300 195 332)
         (j2h 161 292 195 324)
         (j2i 161 284 195 316)
         (j2j 161 276 195 308)
         (j2k 161 268 195 300)
         (j2l 161 260 195 292)
         (j2m 161 252 195 284)
         (j2n 161 244 195 276)
         (j2o 161 236 195 268)
         (j2p 161 228 195 260)
         (j2q 161 220 195 252)

         (h2a 195 348 229 380)
         (h2b 195 340 229 372)
         (h2c 195 332 229 364)
         (h2d 195 324 229 356)
         (h2e 195 316 229 348)
         (h2f 195 308 229 340)
         (h2g 195 300 229 332)
         (h2h 195 292 229 324)
         (h2i 195 284 229 316)
         (h2j 195 276 229 308)
         (h2k 195 268 229 300)
         (h2l 195 260 229 292)
         (h2m 195 252 229 284)
         (h2n 195 244 229 276)
         (h2o 195 236 229 268)
         (h2p 195 228 229 260)
         (h2q 195 220 229 252)

         (g2a 229 348 263 380)
         (g2b 229 340 263 372)
         (g2c 229 332 263 364)
         (g2d 229 324 263 356)
         (g2e 229 316 263 348)
         (g2f 229 308 263 340)
         (g2g 229 300 263 332)
         (g2h 229 292 263 324)
         (g2i 229 284 263 316)
         (g2j 229 276 263 308)
         (g2k 229 268 263 300)
         (g2l 229 260 263 292)
         (g2m 229 252 263 284)
         (g2n 229 244 263 276)
         (g2o 229 236 263 268)
         (g2p 229 228 263 260)
         (g2q 229 220 263 252)

         (f2a 287 348 321 380)
         (f2b 287 340 321 372)
         (f2c 287 332 321 364)
         (f2d 287 324 321 356)
         (f2e 287 316 321 348)
         (f2f 287 308 321 340)
         (f2g 287 300 321 332)
         (f2h 287 292 321 324)
         (f2i 287 284 321 316)
         (f2j 287 276 321 308)
         (f2k 287 268 321 300)
         (f2l 287 260 321 292)
         (f2m 287 252 321 284)
         (f2n 287 244 321 276)
         (f2o 287 236 321 268)
         (f2p 287 228 321 260)
         (f2q 287 220 321 252)

         (e2a 321 348 355 380)
         (e2b 321 340 355 372)
         (e2c 321 332 355 364)
         (e2d 321 324 355 356)
         (e2e 321 316 355 348)
         (e2f 321 308 355 340)
         (e2g 321 300 355 332)
         (e2h 321 292 355 324)
         (e2i 321 284 355 316)
         (e2j 321 276 355 308)
         (e2k 321 268 355 300)
         (e2l 321 260 355 292)
         (e2m 321 252 355 284)
         (e2n 321 244 355 276)
         (e2o 321 236 355 268)
         (e2p 321 228 355 260)
         (e2q 321 220 355 252)

         (d2a 355 348 389 380)
         (d2b 355 340 389 372)
         (d2c 355 332 389 364)
         (d2d 355 324 389 356)
         (d2e 355 316 389 348)
         (d2f 355 308 389 340)
         (d2g 355 300 389 332)
         (d2h 355 292 389 324)
         (d2i 355 284 389 316)
         (d2j 355 276 389 308)
         (d2k 355 268 389 300)
         (d2l 355 260 389 292)
         (d2m 355 252 389 284)
         (d2n 355 244 389 276)
         (d2o 355 236 389 268)
         (d2p 355 228 389 260)
         (d2q 355 220 389 252)

         (c2a 389 348 423 380)
         (c2b 389 340 423 372)
         (c2c 389 332 423 364)
         (c2d 389 324 423 356)
         (c2e 389 316 423 348)
         (c2f 389 308 423 340)
         (c2g 389 300 423 332)
         (c2h 389 292 423 324)
         (c2i 389 284 423 316)
         (c2j 389 276 423 308)
         (c2k 389 268 423 300)
         (c2l 389 260 423 292)
         (c2m 389 252 423 284)
         (c2n 389 244 423 276)
         (c2o 389 236 423 268)
         (c2p 389 228 423 260)
         (c2q 389 220 423 252)

         (b2a 423 348 457 380)
         (b2b 423 340 457 372)
         (b2c 423 332 457 364)
         (b2d 423 324 457 356)
         (b2e 423 316 457 348)
         (b2f 423 308 457 340)
         (b2g 423 300 457 332)
         (b2h 423 292 457 324)
         (b2i 423 284 457 316)
         (b2j 423 276 457 308)
         (b2k 423 268 457 300)
         (b2l 423 260 457 292)
         (b2m 423 252 457 284)
         (b2n 423 244 457 276)
         (b2o 423 236 457 268)
         (b2p 423 228 457 260)
         (b2q 423 220 457 252)

         (a2a 457 348 491 380)
         (a2b 457 340 491 372)
         (a2c 457 332 491 364)
         (a2d 457 324 491 356)
         (a2e 457 316 491 348)
         (a2f 457 308 491 340)
         (a2g 457 300 491 332)
         (a2h 457 292 491 324)
         (a2i 457 284 491 316)
         (a2j 457 276 491 308)
         (a2k 457 268 491 300)
         (a2l 457 260 491 292)
         (a2m 457 252 491 284)
         (a2n 457 244 491 276)
         (a2o 457 236 491 268)
         (a2p 457 228 491 260)
         (a2q 457 220 491 252)

         (W2a 506 50 546 82)
         (W2b 506 58 546 90)
         (W2c 506 66 546 98)
         (W2d 506 74 546 106)
         (W2e 506 82 546 114)
         (W2f 506 90 546 122)
         (W2g 506 98 546 130)
         (W2h 506 106 546 138)
         (W2i 506 114 546 146)
         (W2j 506 122 546 154)
         (W2k 506 130 546 162)
         (W2l 506 138 546 170)
         (W2m 506 146 546 178)
         (W2n 506 154 546 186)
         (W2o 506 162 546 194)
         (W2p 506 170 546 202)
         (W2q 506 178 546 210)

         (G2a 506 348 546 380)
         (G2b 506 340 546 372)
         (G2c 506 332 546 364)
         (G2d 506 324 546 356)
         (G2e 506 316 546 348)
         (G2f 506 308 546 340)
         (G2g 506 300 546 332)
         (G2h 506 292 546 324)
         (G2i 506 284 546 316)
         (G2j 506 276 546 308)
         (G2k 506 268 546 300)
         (G2l 506 260 546 292)
         (G2m 506 252 546 284)
         (G2n 506 244 546 276)
         (G2o 506 236 546 268)
         (G2p 506 228 546 260)
         (G2q 506 220 546 252)

         (R2a 10 348 50 380)
         (R2b 10 340 50 372)
         (R2c 10 332 50 364)
         (R2d 10 324 50 356)
         (R2e 10 316 50 348)
         (R2f 10 308 50 340)
         (R2g 10 300 50 332)
         (R2h 10 292 50 324)
         (R2i 10 284 50 316)
         (R2j 10 276 50 308)
         (R2k 10 268 50 300)
         (R2l 10 260 50 292)
         (R2m 10 252 50 284)
         (R2n 10 244 50 276)
         (R2o 10 236 50 268)
         (R2p 10 228 50 260)
         (R2q 10 220 50 252)

         (B2a 10 50 50 82)
         (B2b 10 58 50 90)
         (B2c 10 66 50 98)
         (B2d 10 74 50 106)
         (B2e 10 82 50 114)
         (B2f 10 90 50 122)
         (B2g 10 98 50 130)
         (B2h 10 106 50 138)
         (B2i 10 114 50 146)
         (B2j 10 122 50 154)
         (B2k 10 130 50 162)
         (B2l 10 138 50 170)
         (B2m 10 146 50 178)
         (B2n 10 154 50 186)
         (B2o 10 162 50 194)
         (B2p 10 170 50 202)
         (B2q 10 178 50 210)

         (B1a  59 391  93 423)
         (B1b  93 391 127 423)
         (B1c 127 391 161 423)
         (B1d 161 391 195 423)
         (B1e 195 391 229 423)
         (B1f 229 391 263 423)
         (B1g  64 386  98 418)
         (B1h  98 386 132 418)
         (B1j 132 386 166 418)
         (B1k 166 386 200 418)
         (B1l 200 386 234 418)
         (B1m 234 386 268 418)

         (W1a 287 391 321 423)
         (W1b 321 391 355 423)
         (W1c 355 391 389 423)
         (W1d 389 391 423 423)
         (W1e 423 391 457 423)
         (W1f 457 391 491 423)
         (W1g 292 386 326 418)
         (W1h 326 386 360 418)
         (W1j 360 386 394 418)
         (W1k 394 386 428 418)
         (W1l 428 386 462 418)
         (W1m 462 386 496 418)

         (R1a  59   7  93  39)
         (R1b  93   7 127  39)
         (R1c 127   7 161  39)
         (R1d 161   7 195  39)
         (R1e 195   7 229  39)
         (R1f 229   7 263  39)
         (R1g  64   2  98  34)
         (R1h  98   2 132  34)
         (R1j 132   2 166  34)
         (R1k 166   2 200  34)
         (R1l 200   2 234  34)
         (R1m 234   2 268  34)

         (G1a 287   7 321  39)
         (G1b 321   7 355  39)
         (G1c 355   7 389  39)
         (G1d 389   7 423  39)
         (G1e 423   7 457  39)
         (G1f 457   7 491  39)
         (G1g 292   2 326  34)
         (G1h 326   2 360  34)
         (G1j 360   2 394  34)
         (G1k 394   2 428  34)
         (G1l 428   2 462  34)
         (G1m 462   2 496  34)

         (D1 110 160 144 189) 
         (D2 144 160 178 189) 
         (D3 178 160 212 189) 
         (D4 338 160 372 189) 
         (D5 372 160 406 189) 
         (D6 406 160 440 189) 
     )
  )

  (piece
     (name Man)
     (image White "images/backgammon/white.bmp"
            Green "images/backgammon/green.bmp"
            Red   "images/backgammon/Red.bmp"
            Black "images/backgammon/black.bmp")
     (moves
         (move-type normal-type)
         (step-1 wn) (step-2 wn)
         (step-3 wn) (step-4 wn)
         (step-5 wn) (step-6 wn)
     )
  )
  (d 1) (d 2) (d 3) (d 4) (d 5) (d 6)
)
